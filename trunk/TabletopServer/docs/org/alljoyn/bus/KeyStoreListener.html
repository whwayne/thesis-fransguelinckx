<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_26) on Tue Jan 31 21:08:02 CET 2012 -->
<TITLE>
KeyStoreListener (AllJoyn Java API Reference Manual)
</TITLE>

<META NAME="date" CONTENT="2012-01-31">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="KeyStoreListener (AllJoyn Java API Reference Manual)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/KeyStoreListener.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<b>AllJoyn Java API<br/>Reference Manual</b></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/alljoyn/bus/IntrospectionListener.html" title="interface in org.alljoyn.bus"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/alljoyn/bus/MarshalBusException.html" title="class in org.alljoyn.bus"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/alljoyn/bus/KeyStoreListener.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="KeyStoreListener.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.alljoyn.bus</FONT>
<BR>
Interface KeyStoreListener</H2>
<HR>
<DL>
<DT><PRE>public interface <B>KeyStoreListener</B></DL>
</PRE>

<P>
Implemented by a user-defined class that is responsible for loading and
 storing keys.  Encryption and decryption of key data is handled internally
 using the password supplied by <code>getPassword</code>.

 Listener objects are the Java objects that handle notification events and are
 called from AllJoyn in the context of one of its threads.  All listener
 objects are expected to be multithread safe (MT-Safe) between construction
 and destruction.

 This rule extends to other objects accessed during processing of
 notifications.  For example, it is a programming error to allow a notifiation
 method to access a collection in another object without serializing access
 to the collection.

 The important consideration in this case is that as soon as one sets up a
 listener object to receive notifications from AllJoyn, one is implicitly
 dealing with multithreaded code.

 Since listener objects generally run in the context of the AllJoyn thread
 which manages reception of events, If a blocking AllJoyn call is made in 
 the context of a notification, the necessary and sufficient conditions for
 deadlock are established.

 The important consideration in this case is that when one receives a
 notification from AllJoyn, that notification is executing in the context of
 an AllJoyn thread.  If one makes a blocking call back into AllJoyn on that
 thread, a deadlock cycle is likely, and if this happens your bus attachment
 receive thread will deadlock (with itself).  The deadlock is typically broken
 after a bus timeout eventually happens.

 Note well that calls into the KeyStoreListener will be happening in the
 context of an AllJoyn endpoint receive thread, and therefore long-lived
 operations will block that endpoint for the duration of the call.  Don't
 dawdle in your implementations of these functions.
<P>

<P>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;byte[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/alljoyn/bus/KeyStoreListener.html#getKeys()">getKeys</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Asks to read encrytped key data, presumably from a local KeyStore.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;char[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/alljoyn/bus/KeyStoreListener.html#getPassword()">getPassword</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Asks to provide the password required to decrypt/encrypt the keys.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/alljoyn/bus/KeyStoreListener.html#putKeys(byte[])">putKeys</A></B>(byte[]&nbsp;keys)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A request to write the encrypted keys, presumably to a local key store.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getKeys()"><!-- --></A><H3>
getKeys</H3>
<PRE>
byte[] <B>getKeys</B>()
               throws <A HREF="../../../org/alljoyn/bus/BusException.html" title="class in org.alljoyn.bus">BusException</A></PRE>
<DL>
<DD>Asks to read encrytped key data, presumably from a local KeyStore.

 The return value here is a reference to a byte array Object.  Upon
 return, this reference will be held by AllJoyn code which is certainly
 running on a different thread than the Java client that has provided
 the listener.  Since there are two threads and one Object involved,
 one must consider multi-thread safety.

 Note that since there is no enforced rule that there is a one-to-one
 relationship between endpoints and KeyStoreListeners, it is possible to
 to have putKeys requests interleave with getKeys and getPasswords on
 different threads.

 It would be possible to require the KeyStoreListener to provide a
 public critical section mechanism to allow the AllJoyn bindings to
 serialize access to the keys array, but this would complicate simple
 cases.  We choose to let the client decide how to best handle the
 situation and do not impose a locking scheme.  This means that the
 reference returned to AllJoyn must be to a byte[] that will not change
 during the lifetime of the AllJoyn bus attachment.

 The basic alternatives are:

 - If the keys are guaranteed not to change after being initialized i.e.,
   they are final, the client can simply return a reference to the
   internal byte array.

 - If the keys only change at times when it is impossible for the AllJoyn
   code to be using them, the client can simply return a reference to the
   internal byte array.

 - If the keys are dynamic and could change while AllJoyn is using them,
   the client must return a current copy of the keys to AllJoyn which
   will not change (and should be consistent with values returned for
   getPassword).
<P>
<DD><DL>

<DT><B>Returns:</B><DD>a reference to a copy of the key data if it is mutable, or a
         reference to the key data if not.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../org/alljoyn/bus/BusException.html" title="class in org.alljoyn.bus">BusException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getPassword()"><!-- --></A><H3>
getPassword</H3>
<PRE>
char[] <B>getPassword</B>()
                   throws <A HREF="../../../org/alljoyn/bus/BusException.html" title="class in org.alljoyn.bus">BusException</A></PRE>
<DL>
<DD>Asks to provide the password required to decrypt/encrypt the keys.

 The return value here is a reference to a byte array Object.  Upon
 return, this reference will be held by AllJoyn code which is certainly
 running on a different thread than the Java client that has provided
 the listener.  Since there are two threads and one Object involved,
 one must consider multi-thread safety.

 Note that since there is no enforced rule that there is a one-to-one
 relationship between endpoints and KeyStoreListeners, it is possible to
 to have putKeys requests interleave with getKeys and getPasswords on
 different threads.

 It would be possible to require the KeyStoreListener to provide a
 public critical section mechanism to allow the AllJoyn bindings to
 serialize access to the password array, but this would complicate simple
 cases.  We choose to let the client decide how to best handle the
 situation and do not impose a locking scheme.  This means that the
 reference returned to AllJoyn must be to a char[] that will not change
 during the lifetime of the AllJoyn bus attachment (unless the AllJoyn
 code decides to do so).

 The basic alternatives are:

 - If the password is guaranteed not to change after being initialized
   i.e., it is final, the client can simply return a reference to the
   internal char array.  Note that the AllJoyn code will clear the bytes
   stored in the password array after it is done with them.

 - If the password only changes at times when it is impossible for the
   AllJoyn code to be using it, the client can simply return a reference
   to the internal char array.  AllJoyn will clear the bytes stored in
   the password array after it is done with them.

 - If the password is dynamic and could change while AllJoyn is using it,
   the client must return a current copy of the password to AllJoyn
   which it prmises not to change.  AllJoyn will clear the bytes stored in
   the retruned password array object after it is done with them.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>a reference to a copy of the password if it is mutable, or a
         reference to the key data if not.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../org/alljoyn/bus/BusException.html" title="class in org.alljoyn.bus">BusException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="putKeys(byte[])"><!-- --></A><H3>
putKeys</H3>
<PRE>
void <B>putKeys</B>(byte[]&nbsp;keys)
             throws <A HREF="../../../org/alljoyn/bus/BusException.html" title="class in org.alljoyn.bus">BusException</A></PRE>
<DL>
<DD>A request to write the encrypted keys, presumably to a local key store.

 Note that since there is no enforced rule that there is a one-to-one
 relationship between endpoints and KeyStoreListeners, it is possible to
 to have putKeys requests interleave with getKeys and getPasswords on
 different threads.

 The implementation of the KeyStoreListener is expected to provide a
 multi-thread safe version.  The AllJoyn Java bindings will simply use
 that implementation, trusting that it produces consistent results.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>keys</CODE> - the key data
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../org/alljoyn/bus/BusException.html" title="class in org.alljoyn.bus">BusException</A></CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/KeyStoreListener.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<b>AllJoyn Java API<br/>Reference Manual</b></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/alljoyn/bus/IntrospectionListener.html" title="interface in org.alljoyn.bus"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/alljoyn/bus/MarshalBusException.html" title="class in org.alljoyn.bus"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/alljoyn/bus/KeyStoreListener.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="KeyStoreListener.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
<small>AllJoyn Java API Reference Manual Version 2.3.2 (Tue Jan 31 21:07:59 2012)<br/>Copyright &copy; 2012 Qualcomm Innovation Center, Inc.<br/>This document is licensed under a Creative Commons Attribution-Share Alike 3.0 Unported License; provided,<br/>that (i) any source code incorporated in this document is licensed under the Apache License version 2.0<br/>and (ii) <b>THIS DOCUMENT AND ALL INFORMATION CONTAIN HEREIN ARE PROVIDED ON AN AS-IS BASIS WITHOUT WARRANTY OF ANY KIND</b>.<br/><a href='http://creativecommons.org/licenses/by-sa/3.0'>Creative Commons Attribution-Share Alike 3.0 Unported License</a><br/><b>MAY CONTAIN U.S. AND INTERNATIONAL EXPORT CONTROLLED INFORMATION</b><br/></small>
</BODY>
</HTML>
